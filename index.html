<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Chat WebApp</title>
<style>
/* –°—Ç–∏–ª–∏ –Ω–µ–æ–Ω–∞, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —á–∞—Ç */
body { margin:0; font-family:Roboto,sans-serif; background:#111; color:#fff; display:flex; flex-direction:column; height:100vh; }
.chat-container { flex:1; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:10px; }
.message { max-width:70%; padding:12px 18px; border-radius:20px; display:flex; gap:10px; }
.user-message { align-self:flex-end; background:rgba(0,255,128,0.5); box-shadow:0 0 10px #0f0,0 0 20px #0f0 inset; }
.bot-message { align-self:flex-start; background:rgba(0,128,255,0.5); box-shadow:0 0 10px #0af,0 0 20px #0af inset; }
.avatar { width:36px;height:36px;border-radius:50%;flex-shrink:0;background-size:cover; }
.message img { max-width:200px; max-height:200px; border-radius:15px; }
.input-container { display:flex; padding:10px; gap:10px; background:rgba(0,0,0,0.7); }
.input-container input[type="text"] { flex:1; padding:12px 18px; border-radius:25px; border:2px solid #0ff; background:rgba(0,0,0,0.5); color:#fff; }
.input-container button { padding:12px 20px; border:none; border-radius:25px; background:linear-gradient(45deg,#0ff,#f0f); color:#fff; cursor:pointer; }
.input-container button:hover { transform:scale(1.05); }
label { display:flex; align-items:center; justify-content:center; width:42px;height:42px;border-radius:50%; background:rgba(0,255,255,0.3); cursor:pointer; }
#photo { display:none; }
</style>
</head>
<body>

<div class="chat-container" id="chat"></div>

<div class="input-container">
    <input type="text" id="message" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
    <label for="photo">üìé</label>
    <input type="file" id="photo">
    <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>

<script>
const tg = window.Telegram.WebApp;
const chat = document.getElementById("chat");

function addMessage(text, isUser=true, img=null){
    const div=document.createElement("div");
    div.classList.add("message",isUser?"user-message":"bot-message");
    const avatar=document.createElement("div");
    avatar.classList.add("avatar");
    avatar.style.backgroundImage=isUser?"url('https://i.pravatar.cc/36?img=3')":"url('https://i.pravatar.cc/36?img=5')";
    div.appendChild(avatar);
    const content=document.createElement("div");
    if(img){ const image=document.createElement("img"); image.src=img; content.appendChild(image); if(text){const p=document.createElement("p"); p.textContent=text; content.appendChild(p);} } 
    else{content.textContent=text;}
    div.appendChild(content);
    chat.appendChild(div);
    chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){
    const messageInput=document.getElementById("message");
    const photoInput=document.getElementById("photo");
    if(messageInput.value){ addMessage(messageInput.value,true); tg.sendData(JSON.stringify({type:"text",message:messageInput.value})); messageInput.value=""; }
    if(photoInput.files.length>0){
        const reader=new FileReader();
        reader.onload=()=>{ addMessage("",true,reader.result); tg.sendData(JSON.stringify({type:"photo",photo:reader.result})); photoInput.value=""; }
        reader.readAsDataURL(photoInput.files[0]);
    }
}
</script>

</body>
</html>
